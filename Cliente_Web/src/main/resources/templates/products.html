<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title>Productos</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
      body {
          background-color: #f5f5f5;
      }
      .header {
          background-color: #007bff;
          padding: 1.5rem 0;
          margin-bottom: 2rem;
      }
      .header h2 {
          color: white;
          margin: 0;
      }
      .btn-home {
          background-color: white;
          color: #007bff;
          border: 1px solid white;
          padding: 8px 20px;
          text-decoration: none;
      }
      .btn-home:hover {
          background-color: #f0f0f0;
          color: #0056b3;
      }
      .search-box {
          background: white;
          padding: 2rem;
          border: 1px solid #ddd;
          margin-bottom: 2rem;
      }
      .search-box h5 {
          color: #333;
          margin-bottom: 1.5rem;
      }
      .btn-search {
          background-color: #007bff;
          border: none;
          color: white;
          padding: 8px 30px;
      }
      .btn-search:hover {
          background-color: #0056b3;
          color: white;
      }
      .result-box {
          background-color: #e6cdfd;
          border: 1px solid #ce97e8;
          padding: 1.5rem;
          margin-top: 1.5rem;
      }
      .result-box h6 {
          color: #7838e5;
          margin-bottom: 1rem;
      }
      .error-box {
          background-color: #f8d7da;
          border: 1px solid #f5c6cb;
          padding: 1.5rem;
          margin-top: 1.5rem;
          color: #721c24;
      }
      .table-container {
          background: white;
          padding: 2rem;
          border: 1px solid #ddd;
      }
      .table-container h5 {
          color: #333;
          margin-bottom: 1.5rem;
      }
      table thead {
          background-color: #007bff;
          color: white;
      }
      table tbody tr:hover {
          background-color: #f0f0f0;
      }
  </style>
</head>
<body>

<div class="header">
  <div class="container d-flex justify-content-between align-items-center">
    <h2>Catálogo de Productos</h2>
    <a th:href="@{/}" class="btn-home">Inicio</a>
  </div>
</div>

<div class="container">
  <div class="search-box">
    <h5>Buscar Producto</h5>
    <form th:action="@{/products/find}" method="post" class="row g-3">
      <div class="col-md-4">
        <input type="number" name="id" class="form-control" placeholder="ID del producto" required>
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-search">Buscar</button>
      </div>
    </form>

    <div th:if="${error}" class="error-box" th:text="${error}"></div>

    <div th:if="${resultado}" class="result-box">
      <h6>Producto Encontrado</h6>
      <p><strong>ID:</strong> <span th:text="${resultado.id}"></span></p>
      <p><strong>Nombre:</strong> <span th:text="${resultado.productName}"></span></p>
      <p><strong>Unidad:</strong> <span th:text="${resultado.unit}"></span></p>
      <p><strong>Precio:</strong> S/. <span th:text="${resultado.price}"></span></p>
      <p><strong>Categoría:</strong> <span th:text="${resultado.category?.categoryName} ?: '-'"></span></p>
      <p><strong>Proveedor:</strong> <span th:text="${resultado.supplier?.supplierName} ?: '-'"></span></p>
    </div>
  </div>

  <div class="table-container">
    <h5>Todos los Productos</h5>
    <table class="table table-hover">
      <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Unidad</th>
        <th>Precio</th>
        <th>Categoría</th>
        <th>Proveedor</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="p : ${productos}">
        <td th:text="${p.id}"></td>
        <td th:text="${p.productName}"></td>
        <td th:text="${p.unit}"></td>
        <td>S/. <span th:text="${p.price}"></span></td>
        <td th:text="${p.category?.categoryName} ?: '-'"></td>
        <td th:text="${p.supplier?.supplierName} ?: '-'"></td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

</body>
</html>